import{d as q,r as g,o as D,h as T,u as B,c as H,a,w as o,b as M,e as i,f as z,g as h,i as E,j as G}from"./index-31dfb4c4.js";import{A as $}from"./apiService-b5d2106a.js";function x(){return x=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(s[c]=n[c])}return s},x.apply(this,arguments)}var F=function(){var e=!1,n=[],c=function(){if(!e){e=!0;for(var p=0,w=n.length;p<w;p++)n[p]()}},l=function(p){if(!e){n.push(p);return}p()},m={resolved:function(){return e},resolve:c,promise:{then:l}};return m},A=Object.prototype.hasOwnProperty;function K(){var s=F();return{notify:function(){s.resolve()},wait:function(){return s.promise},render:function(n,c,l){this.wait().then(function(){l(window.grecaptcha.render(n,c))})},reset:function(n){typeof n>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(n)}))},execute:function(n){typeof n>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(n)}))},checkRecaptchaLoad:function(){A.call(window,"grecaptcha")&&A.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!s.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var S=K();typeof window<"u"&&(window.vueRecaptchaApiLoaded=S.notify);var X=q({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(e,n){var c=n.slots,l=n.emit,m=g(null),t=g(null),p=function(v){l("verify",v)},w=function(){l("expired")},y=function(){l("error")};return D(function(){if(S.checkRecaptchaLoad(),e.loadRecaptchaScript&&!document.getElementById(e.recaptchaScriptId)){var u=document.createElement("script");u.id=e.recaptchaScriptId,u.src="https://"+e.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+e.language,u.async=!0,u.defer=!0,document.head.appendChild(u)}var v=x({},e,{callback:p,"expired-callback":w,"error-callback":y}),r=m.value,_=c.default?r.children[0]:r;S.render(_,v,function(d){t.value=d,l("render",d)})}),{root:m,widgetId:t,reset:function(){S.reset(t.value)},execute:function(){S.execute(t.value)}}},render:function(){var e=this.$slots.default,n;return typeof e=="function"?n=e():n=e,T("div",{ref:"root"},n)}});const Y={class:"card-inicio"},Z=E("b",null," CEPREUNA ",-1),W={__name:"Inicio",setup(s){const e=v=>v>0,n=M(),c=B(),l=g(!1),m=g(null),t=g({tipo_doc:"dni",dni:null,voucher_pago:{file:null,secuencia:null,fecha:"",hora:"",monto:""}}),p={tipo_doc:{required:!0},dni:{required:!0,validator(v,r){let _=t.value.tipo_doc=="dni"?8:12;if(r){if(r.toString().length!=_)return new Error("Número de documento invalido")}else return new Error("Obligatorio");return!0},trigger:["input","blur"]},voucher_pago:{secuencia:{required:!0,message:"Obligatorio",trigger:["blur","input"]},fecha:{required:!0,message:"Obligatorio",trigger:["blur","input"]},monto:{required:!0,message:"Obligatorio",trigger:["blur","input"]}}},w=async v=>{var r;v.preventDefault(),await((r=m.value)==null?void 0:r.validate(async _=>{if(_)console.log(_),c.error("Datos ingresados no validos");else{l.value=!0;let d=await $.iniciarPreInscripcion(t.value.dni);y.value==!1?c.error("Completar el reCapcha"):d.estado?(window.localStorage.setItem("tipo_doc",t.value.tipo_doc),window.localStorage.setItem("num_doc",t.value.dni),window.localStorage.setItem("codigo",d.codigo),window.localStorage.setItem("secuencia",t.value.voucher_pago.secuencia),window.localStorage.setItem("fecha",t.value.voucher_pago.fecha),window.localStorage.setItem("monto",t.value.voucher_pago.monto),n.push("/postulante/"+t.value.dni+"/"+d.codigo)):c.error(d.mensaje),l.value=!1}}))},y=g(!1),u=async()=>{y.value=!0};return(v,r)=>{const _=i("n-radio"),d=i("n-space"),N=i("n-radio-group"),b=i("n-form-item"),k=i("n-input-number"),O=i("n-divider"),C=i("n-image"),R=i("n-tab-pane"),P=i("n-tabs"),j=i("n-alert"),I=i("n-input"),L=i("n-button"),V=i("n-form"),U=i("n-card");return z(),H("div",Y,[a(U,{class:"mt-1 mb-1"},{header:o(()=>[h(" PRE INSCRIPCIÓN - "),Z]),action:o(()=>[a(d,{justify:"center"},{default:o(()=>[h(" © Copyright 2023 - UNA-Puno ")]),_:1})]),default:o(()=>[a(V,{ref_key:"formRef",ref:m,"label-width":80,model:t.value,rules:p},{default:o(()=>[a(b,{label:"Tipo de documento de identidad",path:"tipo_doc"},{default:o(()=>[a(N,{value:t.value.tipo_doc,"onUpdate:value":r[0]||(r[0]=f=>t.value.tipo_doc=f),name:"tipo-doc"},{default:o(()=>[a(d,null,{default:o(()=>[a(_,{value:"dni"},{default:o(()=>[h(" DNI ")]),_:1}),a(_,{value:"carnet"},{default:o(()=>[h(" Carné de Extrangería ")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),a(b,{label:"Número del documento",path:"dni"},{default:o(()=>[a(k,{value:t.value.dni,"onUpdate:value":r[1]||(r[1]=f=>t.value.dni=f),"show-button":!1,class:"b-block",placeholder:"Número del documento",validator:e},null,8,["value"])]),_:1}),a(O,{"title-placement":"center"},{default:o(()=>[h(" PAGO POR DERECHO DE ADMISIÓN ")]),_:1}),a(j,{class:"mb-1","show-icon":!1},{default:o(()=>[a(P,{type:"line",animated:""},{default:o(()=>[a(R,{name:"oasis",tab:"Agencia"},{default:o(()=>[a(d,{justify:"center"},{default:o(()=>[a(C,{width:"350",lazy:"",src:"/assets/exam_voucher/voucherDniBN.jpg"})]),_:1})]),_:1}),a(R,{name:"the beatles",tab:"Pago en caja"},{default:o(()=>[a(d,{justify:"center"},{default:o(()=>[a(C,{width:"350",lazy:"",src:"/assets/exam_voucher/voucher-caja.jpg"})]),_:1})]),_:1})]),_:1})]),_:1}),a(b,{path:"voucher_pago.secuencia",label:"N° secuencia:"},{default:o(()=>[a(I,{value:t.value.voucher_pago.secuencia,"onUpdate:value":r[2]||(r[2]=f=>t.value.voucher_pago.secuencia=f),placeholder:"330236"},null,8,["value"])]),_:1}),a(b,{path:"voucher_pago.fecha",label:"Fecha de pago:"},{default:o(()=>[a(I,{type:"date",value:t.value.voucher_pago.fecha,"onUpdate:value":r[3]||(r[3]=f=>t.value.voucher_pago.fecha=f),placeholder:""},null,8,["value"])]),_:1}),a(b,{path:"voucher_pago.monto",label:"Monto:"},{default:o(()=>[a(I,{value:t.value.voucher_pago.monto,"onUpdate:value":r[4]||(r[4]=f=>t.value.voucher_pago.monto=f),placeholder:""},null,8,["value"])]),_:1}),E("div",null,[a(G(X),{onVerify:u,onExpired:r[5]||(r[5]=f=>y.value=!1),sitekey:"6LfuV3wkAAAAACGAmSGKYTNZAoff-1L3eqXgRwOV"})]),a(L,{class:"b-block",type:"primary",onClick:w,"icon-placement":"right",loading:l.value},{default:o(()=>[h(" INICIAR POSTULACIÓN ")]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1})])}}};export{W as default};
